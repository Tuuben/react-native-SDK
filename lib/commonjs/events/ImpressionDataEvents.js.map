{"version":3,"sources":["ImpressionDataEvents.ts"],"names":["IronSourceMediation","NativeModules","ON_IMPRESSION_SUCCESS","getConstants","eventEmitter","NativeEventEmitter","onImpressionSuccess","setListener","listener","removeAllListeners","addListener","dataObj","impressionDataCodec","undefined","removeListener","ImpressionDataEvents"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;AACA,MAAM;AAAEA,EAAAA;AAAF,IAA0BC,0BAAhC,C,CACA;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAA4BF,mBAAmB,CAACG,YAApB,EAAlC,C,CAEA;;AACA,MAAMC,YAAY,GAAG,IAAIC,+BAAJ,CAAuBL,mBAAvB,CAArB;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AACA,MAAMM,mBAAmB,GAAG;AAC1BC,EAAAA,WAAW,EAAGC,QAAD,IAA+C;AAC1DJ,IAAAA,YAAY,CAACK,kBAAb,CAAgCP,qBAAhC;AACAE,IAAAA,YAAY,CAACM,WAAb,CAAyBR,qBAAzB,EAAiDS,OAAD,IAC9CH,QAAQ,CAACG,OAAO,GAAG,mBAAOC,2BAAP,EAA4BD,OAA5B,CAAH,GAA0CE,SAAlD,CADV;AAGD,GANyB;AAO1BC,EAAAA,cAAc,EAAE,MAAMV,YAAY,CAACK,kBAAb,CAAgCP,qBAAhC;AAPI,CAA5B;;AAUA,MAAMO,kBAAkB,GAAG,MAAM;AAC/BH,EAAAA,mBAAmB,CAACQ,cAApB;AACD,CAFD;;AAIO,MAAMC,oBAAoB,GAAG;AAClCT,EAAAA,mBADkC;AAElCG,EAAAA;AAFkC,CAA7B","sourcesContent":["import { NativeEventEmitter, NativeModules } from 'react-native'\nimport { impressionDataCodec, ImpressionData } from '../models'\nimport { decode } from '../models/utils'\n\n// The Main Module\nconst { IronSourceMediation } = NativeModules\n// Event Name Constants defined on each platform\nconst { ON_IMPRESSION_SUCCESS } = IronSourceMediation.getConstants()\n\n// Create an EventEmitter to subscribe to ImpressionDataListener callbacks\nconst eventEmitter = new NativeEventEmitter(IronSourceMediation)\n\n/**\n * ARM ImpressionDataListener event API\n * The ARM SDK Postbacks flag must be enabled to receive data\n * https://developers.is.com/ironsource-mobile/general/ad-revenue-measurement-postbacks/#step-1\n */\n\n/**\n * Android: onImpressionSuccess\n *     iOS: impressionDataDidSucceed\n */\nconst onImpressionSuccess = {\n  setListener: (listener: (data?: ImpressionData) => void) => {\n    eventEmitter.removeAllListeners(ON_IMPRESSION_SUCCESS)\n    eventEmitter.addListener(ON_IMPRESSION_SUCCESS, (dataObj?: unknown) =>\n      listener(dataObj ? decode(impressionDataCodec, dataObj) : undefined)\n    )\n  },\n  removeListener: () => eventEmitter.removeAllListeners(ON_IMPRESSION_SUCCESS),\n}\n\nconst removeAllListeners = () => {\n  onImpressionSuccess.removeListener()\n}\n\nexport const ImpressionDataEvents = {\n  onImpressionSuccess,\n  removeAllListeners,\n}\n"]}