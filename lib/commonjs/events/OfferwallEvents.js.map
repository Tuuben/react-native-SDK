{"version":3,"sources":["OfferwallEvents.ts"],"names":["IronSourceMediation","NativeModules","ON_OW_AVAILABILITY_CHANGED","ON_OW_OPENED","ON_OW_SHOW_FAILED","ON_OW_AD_CREDITED","ON_OW_CREDITS_FAILED","ON_OW_CLOSED","getConstants","eventEmitter","NativeEventEmitter","onOfferwallAvailabilityChanged","setListener","listener","removeAllListeners","addListener","availabilityObj","isAvailable","availabilityCodec","removeListener","onOfferwallOpened","onOfferwallShowFailed","error","onOfferwallAdCredited","creditInfo","onGetOfferwallCreditsFailed","errorObj","ironSourceErrorCodec","onOfferwallClosed","OfferwallEvents"],"mappings":"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","sourcesContent":["import { NativeEventEmitter, NativeModules } from 'react-native'\nimport {\n  IronSourceError,\n  ironSourceErrorCodec,\n  IronSourceOWCreditInfo,\n} from '../models'\nimport { availabilityCodec } from '../models/Availability'\nimport { decode } from '../models/utils'\n\n// The Main Module\nconst { IronSourceMediation } = NativeModules\n// Event Name Constants defined on each platform\nconst {\n  ON_OW_AVAILABILITY_CHANGED,\n  ON_OW_OPENED,\n  ON_OW_SHOW_FAILED,\n  ON_OW_AD_CREDITED,\n  ON_OW_CREDITS_FAILED,\n  ON_OW_CLOSED,\n} = IronSourceMediation.getConstants()\n\n// Create an EventEmitter to subscribe to OfferwallListener callbacks\nconst eventEmitter = new NativeEventEmitter(IronSourceMediation)\n\n/**\n * OW Listener Callback Events Handler APIs\n */\n\n/**\n * Android: onOfferwallAvailabilityChanged\n *     iOS: offerwallHasChangedAvailability\n */\nconst onOfferwallAvailabilityChanged = {\n  setListener: (listener: (isAvailable: boolean) => void) => {\n    eventEmitter.removeAllListeners(ON_OW_AVAILABILITY_CHANGED)\n    eventEmitter.addListener(\n      ON_OW_AVAILABILITY_CHANGED,\n      (availabilityObj: unknown) => {\n        const { isAvailable } = decode(availabilityCodec, availabilityObj)\n        listener(isAvailable)\n      }\n    )\n  },\n  removeListener: () =>\n    eventEmitter.removeAllListeners(ON_OW_AVAILABILITY_CHANGED),\n}\n\n/**\n * Android: onOfferwallOpened\n *     iOS: offerwallDidShow\n */\nconst onOfferwallOpened = {\n  setListener: (listener: () => void) => {\n    eventEmitter.removeAllListeners(ON_OW_OPENED)\n    eventEmitter.addListener(ON_OW_OPENED, () => listener())\n  },\n  removeListener: () => eventEmitter.removeAllListeners(ON_OW_OPENED),\n}\n\n/**\n * Android: onOfferwallShowFailed\n *     iOS: offerwallDidFailToShowWithError\n */\nconst onOfferwallShowFailed = {\n  setListener: (listener: (error: IronSourceError) => void) => {\n    eventEmitter.removeAllListeners(ON_OW_SHOW_FAILED)\n    eventEmitter.addListener(ON_OW_SHOW_FAILED, (error: IronSourceError) =>\n      listener(error)\n    )\n  },\n  removeListener: () => eventEmitter.removeAllListeners(ON_OW_SHOW_FAILED),\n}\n\n/**\n * Android: onOfferwallAdCredited\n *     iOS: didReceiveOfferwallCredits\n */\nconst onOfferwallAdCredited = {\n  setListener: (listener: (creditInfo: IronSourceOWCreditInfo) => void) => {\n    eventEmitter.removeAllListeners(ON_OW_AD_CREDITED)\n    eventEmitter.addListener(\n      ON_OW_AD_CREDITED,\n      (creditInfo: IronSourceOWCreditInfo) => listener(creditInfo)\n    )\n  },\n  removeListener: () => eventEmitter.removeAllListeners(ON_OW_AD_CREDITED),\n}\n\n/**\n * Android: onGetOfferwallCreditsFailed\n *     iOS: didFailToReceiveOfferwallCreditsWithError\n */\nconst onGetOfferwallCreditsFailed = {\n  setListener: (listener: (error: IronSourceError) => void) => {\n    eventEmitter.removeAllListeners(ON_OW_CREDITS_FAILED)\n    eventEmitter.addListener(ON_OW_CREDITS_FAILED, (errorObj: unknown) =>\n      listener(decode(ironSourceErrorCodec, errorObj))\n    )\n  },\n  removeListener: () => eventEmitter.removeAllListeners(ON_OW_CREDITS_FAILED),\n}\n\n/**\n * Android: onOfferwallClosed\n *     iOS: offerwallDidClose\n */\nconst onOfferwallClosed = {\n  setListener: (listener: () => void) => {\n    eventEmitter.removeAllListeners(ON_OW_CLOSED)\n    eventEmitter.addListener(ON_OW_CLOSED, () => listener())\n  },\n  removeListener: () => eventEmitter.removeAllListeners(ON_OW_CLOSED),\n}\n\nconst removeAllListeners = () => {\n  onOfferwallAvailabilityChanged.removeListener()\n  onOfferwallOpened.removeListener()\n  onOfferwallShowFailed.removeListener()\n  onOfferwallAdCredited.removeListener()\n  onGetOfferwallCreditsFailed.removeListener()\n  onOfferwallClosed.removeListener()\n}\n\nexport const OfferwallEvents = {\n  onOfferwallAvailabilityChanged,\n  onOfferwallOpened,\n  onOfferwallShowFailed,\n  onOfferwallAdCredited,\n  onGetOfferwallCreditsFailed,\n  onOfferwallClosed,\n  removeAllListeners,\n}\n"]}