{"version":3,"sources":["OfferwallEvents.ts"],"names":["NativeEventEmitter","NativeModules","ironSourceErrorCodec","availabilityCodec","decode","IronSourceMediation","ON_OW_AVAILABILITY_CHANGED","ON_OW_OPENED","ON_OW_SHOW_FAILED","ON_OW_AD_CREDITED","ON_OW_CREDITS_FAILED","ON_OW_CLOSED","getConstants","eventEmitter","onOfferwallAvailabilityChanged","setListener","listener","removeAllListeners","addListener","availabilityObj","isAvailable","removeListener","onOfferwallOpened","onOfferwallShowFailed","error","onOfferwallAdCredited","creditInfo","onGetOfferwallCreditsFailed","errorObj","onOfferwallClosed","OfferwallEvents"],"mappings":"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","sourcesContent":["import { NativeEventEmitter, NativeModules } from 'react-native'\nimport {\n  IronSourceError,\n  ironSourceErrorCodec,\n  IronSourceOWCreditInfo,\n} from '../models'\nimport { availabilityCodec } from '../models/Availability'\nimport { decode } from '../models/utils'\n\n// The Main Module\nconst { IronSourceMediation } = NativeModules\n// Event Name Constants defined on each platform\nconst {\n  ON_OW_AVAILABILITY_CHANGED,\n  ON_OW_OPENED,\n  ON_OW_SHOW_FAILED,\n  ON_OW_AD_CREDITED,\n  ON_OW_CREDITS_FAILED,\n  ON_OW_CLOSED,\n} = IronSourceMediation.getConstants()\n\n// Create an EventEmitter to subscribe to OfferwallListener callbacks\nconst eventEmitter = new NativeEventEmitter(IronSourceMediation)\n\n/**\n * OW Listener Callback Events Handler APIs\n */\n\n/**\n * Android: onOfferwallAvailabilityChanged\n *     iOS: offerwallHasChangedAvailability\n */\nconst onOfferwallAvailabilityChanged = {\n  setListener: (listener: (isAvailable: boolean) => void) => {\n    eventEmitter.removeAllListeners(ON_OW_AVAILABILITY_CHANGED)\n    eventEmitter.addListener(\n      ON_OW_AVAILABILITY_CHANGED,\n      (availabilityObj: unknown) => {\n        const { isAvailable } = decode(availabilityCodec, availabilityObj)\n        listener(isAvailable)\n      }\n    )\n  },\n  removeListener: () =>\n    eventEmitter.removeAllListeners(ON_OW_AVAILABILITY_CHANGED),\n}\n\n/**\n * Android: onOfferwallOpened\n *     iOS: offerwallDidShow\n */\nconst onOfferwallOpened = {\n  setListener: (listener: () => void) => {\n    eventEmitter.removeAllListeners(ON_OW_OPENED)\n    eventEmitter.addListener(ON_OW_OPENED, () => listener())\n  },\n  removeListener: () => eventEmitter.removeAllListeners(ON_OW_OPENED),\n}\n\n/**\n * Android: onOfferwallShowFailed\n *     iOS: offerwallDidFailToShowWithError\n */\nconst onOfferwallShowFailed = {\n  setListener: (listener: (error: IronSourceError) => void) => {\n    eventEmitter.removeAllListeners(ON_OW_SHOW_FAILED)\n    eventEmitter.addListener(ON_OW_SHOW_FAILED, (error: IronSourceError) =>\n      listener(error)\n    )\n  },\n  removeListener: () => eventEmitter.removeAllListeners(ON_OW_SHOW_FAILED),\n}\n\n/**\n * Android: onOfferwallAdCredited\n *     iOS: didReceiveOfferwallCredits\n */\nconst onOfferwallAdCredited = {\n  setListener: (listener: (creditInfo: IronSourceOWCreditInfo) => void) => {\n    eventEmitter.removeAllListeners(ON_OW_AD_CREDITED)\n    eventEmitter.addListener(\n      ON_OW_AD_CREDITED,\n      (creditInfo: IronSourceOWCreditInfo) => listener(creditInfo)\n    )\n  },\n  removeListener: () => eventEmitter.removeAllListeners(ON_OW_AD_CREDITED),\n}\n\n/**\n * Android: onGetOfferwallCreditsFailed\n *     iOS: didFailToReceiveOfferwallCreditsWithError\n */\nconst onGetOfferwallCreditsFailed = {\n  setListener: (listener: (error: IronSourceError) => void) => {\n    eventEmitter.removeAllListeners(ON_OW_CREDITS_FAILED)\n    eventEmitter.addListener(ON_OW_CREDITS_FAILED, (errorObj: unknown) =>\n      listener(decode(ironSourceErrorCodec, errorObj))\n    )\n  },\n  removeListener: () => eventEmitter.removeAllListeners(ON_OW_CREDITS_FAILED),\n}\n\n/**\n * Android: onOfferwallClosed\n *     iOS: offerwallDidClose\n */\nconst onOfferwallClosed = {\n  setListener: (listener: () => void) => {\n    eventEmitter.removeAllListeners(ON_OW_CLOSED)\n    eventEmitter.addListener(ON_OW_CLOSED, () => listener())\n  },\n  removeListener: () => eventEmitter.removeAllListeners(ON_OW_CLOSED),\n}\n\nconst removeAllListeners = () => {\n  onOfferwallAvailabilityChanged.removeListener()\n  onOfferwallOpened.removeListener()\n  onOfferwallShowFailed.removeListener()\n  onOfferwallAdCredited.removeListener()\n  onGetOfferwallCreditsFailed.removeListener()\n  onOfferwallClosed.removeListener()\n}\n\nexport const OfferwallEvents = {\n  onOfferwallAvailabilityChanged,\n  onOfferwallOpened,\n  onOfferwallShowFailed,\n  onOfferwallAdCredited,\n  onGetOfferwallCreditsFailed,\n  onOfferwallClosed,\n  removeAllListeners,\n}\n"]}